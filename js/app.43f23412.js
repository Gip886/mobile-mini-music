(function(t){function e(e){for(var r,i,o=e[0],c=e[1],u=e[2],l=0,d=[];l<o.length;l++)i=o[l],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&d.push(a[i][0]),a[i]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);m&&m(e);while(d.length)d.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var o=n[i];0!==a[o]&&(r=!1)}r&&(s.splice(e--,1),t=c(c.s=n[0]))}return t}var r={},i={app:0},a={app:0},s=[];function o(t){return c.p+"js/"+({}[t]||t)+"."+{"chunk-625e6cd4":"a13131a8","chunk-76a5d345":"2d5bb380","chunk-8debb1d4":"ea2b4407"}[t]+".js"}function c(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.e=function(t){var e=[],n={"chunk-625e6cd4":1,"chunk-76a5d345":1,"chunk-8debb1d4":1};i[t]?e.push(i[t]):0!==i[t]&&n[t]&&e.push(i[t]=new Promise((function(e,n){for(var r="css/"+({}[t]||t)+"."+{"chunk-625e6cd4":"5b36afd1","chunk-76a5d345":"a2d2e655","chunk-8debb1d4":"edf301ca"}[t]+".css",a=c.p+r,s=document.getElementsByTagName("link"),o=0;o<s.length;o++){var u=s[o],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===r||l===a))return e()}var d=document.getElementsByTagName("style");for(o=0;o<d.length;o++){u=d[o],l=u.getAttribute("data-href");if(l===r||l===a)return e()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=e,m.onerror=function(e){var r=e&&e.target&&e.target.src||a,s=new Error("Loading CSS chunk "+t+" failed.\n("+r+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=r,delete i[t],m.parentNode.removeChild(m),n(s)},m.href=a;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){i[t]=0})));var r=a[t];if(0!==r)if(r)e.push(r[2]);else{var s=new Promise((function(e,n){r=a[t]=[e,n]}));e.push(r[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=o(t);var d=new Error;u=function(e){l.onerror=l.onload=null,clearTimeout(m);var n=a[t];if(0!==n){if(n){var r=e&&("load"===e.type?"missing":e.type),i=e&&e.target&&e.target.src;d.message="Loading chunk "+t+" failed.\n("+r+": "+i+")",d.name="ChunkLoadError",d.type=r,d.request=i,n[1](d)}a[t]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(e)},c.m=t,c.c=r,c.d=function(t,e,n){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)c.d(n,r,function(e){return t[e]}.bind(null,r));return n},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="",c.oe=function(t){throw console.error(t),t};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=e,u=u.slice();for(var d=0;d<u.length;d++)e(u[d]);var m=l;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";n("85ec")},"094b":function(t,e,n){t.exports=n.p+"img/歌词.f77b35bb.svg"},"0a2f":function(t,e,n){t.exports=n.p+"img/default-album-img.f87c9596.jpg"},"1ae4":function(t,e,n){t.exports=n.p+"img/logo.6c77bfd4.svg"},"1bab":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));n("2b19");var r=n("bc3a"),i=n.n(r);function a(t){var e=i.a.create({baseURL:Object.is("production","production")?"http://47.107.64.149:3000":"/apis/",timeout:5e3});return e(t)}},"261c":function(t,e,n){},3409:function(t,e,n){"use strict";n("9a0b")},"383c":function(t,e,n){t.exports=n.p+"img/前进.50be6416.svg"},"3cc1":function(t,e,n){t.exports=n.p+"img/停止.61e017be.svg"},4633:function(t,e,n){t.exports=n.p+"img/删除.794148b8.svg"},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{staticClass:"app-background",style:t.getBgStyle}),n("div",{staticClass:"app-background-above"},[n("top-bar"),n("view-box"),n("bottom-box"),n("tab-bar")],1)])},a=[],s=n("5530"),o=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"tab-bar"},[r("router-link",{staticClass:"router-link",attrs:{tag:"div",to:"/discover"}},[r("img",{staticClass:"tab-bar-item-icon",attrs:{src:n("9892"),alt:""}}),r("div",{staticClass:"tab-bar-item-text"},[t._v("发现")])]),r("router-link",{staticClass:"router-link",attrs:{tag:"div",to:"/445"}},[r("img",{staticClass:"tab-bar-item-icon",attrs:{src:n("eaf0"),alt:""}}),r("div",{staticClass:"tab-bar-item-text"},[t._v("搜索")])]),r("router-link",{staticClass:"router-link",attrs:{tag:"div",to:"/456"}},[r("img",{staticClass:"tab-bar-item-icon",attrs:{src:n("abf7"),alt:""}}),r("div",{staticClass:"tab-bar-item-text"},[t._v("喜欢")])]),r("router-link",{staticClass:"router-link",attrs:{tag:"div",to:"/lyric"}},[r("img",{staticClass:"tab-bar-item-icon",attrs:{src:n("094b"),alt:""}}),r("div",{staticClass:"tab-bar-item-text"},[t._v("歌词")])])],1)},c=[],u={},l=u,d=(n("585c"),n("2877")),m=Object(d["a"])(l,o,c,!1,null,"fc6f47e2",null),f=m.exports,h=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"top-box"},[r("div",{staticClass:"back-or-forward"},[r("img",{attrs:{src:n("e162"),alt:"",width:"20px"},on:{click:t.goBack}}),r("img",{attrs:{src:n("383c"),alt:"",width:"20px"},on:{click:t.goForward}})]),r("div",{staticClass:"input-box"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.searchText,expression:"searchText",modifiers:{trim:!0}}],staticClass:"search-input",attrs:{type:"text",placeholder:"搜索音乐"},domProps:{value:t.searchText},on:{change:t.searchSong,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.inputBlur.apply(null,arguments)},input:function(e){e.target.composing||(t.searchText=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),r("div",{directives:[{name:"show",rawName:"v-show",value:t.isShowSearchHistory,expression:"isShowSearchHistory"}],staticClass:"search-history-box"},[t._m(0)])]),t._m(1)])},p=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"serach-history-item"},[r("div",{staticClass:"serach-history-block"},[r("div",{staticClass:"search-history-block-text"},[t._v("默认text")]),r("div",{staticClass:"delete-this-search-text"},[r("img",{attrs:{src:n("4633"),width:"20px"}})])])])},function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"app-icon"},[r("img",{attrs:{src:n("1ae4"),alt:"",width:"30px"}})])}],b={data:function(){return{searchText:"",searchHistoryArr:[],isShowSearchHistory:!1,isDeletingSearchText:!1}},methods:{goBack:function(){this.$router.go(-1)},goForward:function(){this.$router.go(1)},inputBlur:function(){document.querySelector(".search-input").blur()},searchSong:function(){this.isShowSearchHistory=!1,""!==this.searchText&&(this.router.push("/search"),this.$store.commit("handleSearchSong",this.searchText))}}},g=b,v=(n("f15b"),Object(d["a"])(g,h,p,!1,null,"99d6fa84",null)),y=v.exports,x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bottom-box",on:{click:t.showPlayingPage}},[n("div",{staticClass:"bottom-box-album-img"},[n("img",{style:1==t.isPlay?t.palyStyle:t.pauseStyle,attrs:{src:null==t.currentMusicInfo.picUrl?t.defaultAlbumImgUrl:t.currentMusicInfo.picUrl}})]),n("div",{staticClass:"current-song-info"},[t._v(t._s(t.currentMusicInfo.name))]),n("div",{staticClass:"bottom-box-playing-or-paused"},[n("img",{attrs:{src:t.isPlay?t.pauseImg:t.playImg,alt:""},on:{click:function(e){return e.stopPropagation(),t.playClick.apply(null,arguments)}}})]),n("audio",{attrs:{id:"audio",src:t.currentMusicItem.musicUrl,autoplay:""}})])},C=[],k=n("2f62"),I={data:function(){return{defaultAlbumImgUrl:n("0a2f"),palyStyle:"animation: albumRotate 15s linear infinite running",pauseStyle:"animation: albumRotate 15s linear infinite paused",playImg:n("9217"),pauseImg:n("3cc1")}},computed:Object(s["a"])(Object(s["a"])({},Object(k["c"])({isPlay:"isPlay",audio:function(t){return t.audio},currentIndex:"currentIndex",currentList:"currentList",currentMusicItem:function(t){return null!=t.currentMusicItem?t.currentMusicItem:{}}})),Object(k["b"])(["currentMusicInfo"])),mounted:function(){var t=document.querySelector("#audio");t.volume=.8,this.$store.commit("sendAudio",t),this.$store.commit("sendAudioVolume",80),this.addAudioEventListeners()},methods:{addAudioEventListeners:function(){this.audio.addEventListener("canplay",this.getDuration),this.audio.addEventListener("timeupdate",this.getCurrentTime),this.audio.addEventListener("ended",this.autoPlayNextSong)},getDuration:function(){var t=this.audio.duration;this.$store.commit("sendDuration",t),this.audio.play(),this.$store.commit("changeAudioPlay",!0)},getCurrentTime:function(){var t=this.audio.currentTime;this.$store.commit("sendCurrentTime",t)},autoPlayNextSong:function(){this.$store.commit("changeAudioPlay",!1),this.currentIndex<this.currentList.length&&(this.$store.state.currentIndex++,this.$store.dispatch("getMusicDetail",{musicItem:this.currentList[this.currentIndex],index:this.currentIndex}),this.$store.dispatch("getMusiclyric",{id:this.currentList[this.currentIndex].id}))},playClick:function(){""!=this.audio.src&&(this.isPlay?(this.audio.pause(),this.$store.commit("changeAudioPlay",!1)):(this.audio.play(),this.$store.commit("changeAudioPlay",!0)))},showPlayingPage:function(){"/playing"!=this.$route.path&&this.$router.push("/playing")}}},w=I,O=(n("a5d8"),Object(d["a"])(w,x,C,!1,null,null,null)),S=O.exports,_=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"view-box"},[n("keep-alive",[n("router-view")],1)],1)},j=[],L={},P=L,M=(n("3409"),Object(d["a"])(P,_,j,!1,null,"4ed23f09",null)),T=M.exports,$={name:"app",components:{TabBar:f,TopBar:y,BottomBox:S,ViewBox:T},data:function(){return{defaultAlbumImgUrl:n("0a2f"),albumImgUrl:null,bgStyle:{}}},computed:Object(s["a"])(Object(s["a"])({},Object(k["c"])({currentList:function(t){return t.currentList},currentIndex:function(t){return t.currentIndex}})),{},{getBgStyle:function(){return null==this.currentList[this.currentIndex]?(this.albumImgUrl=this.defaultAlbumImgUrl,console.log(this.albumImgUrl)):this.albumImgUrl=this.currentList[this.currentIndex].picUrl,this.bgStyle={"background-image":"url("+this.albumImgUrl+")"},this.bgStyle}}),methods:{}},A=$,E=(n("034f"),Object(d["a"])(A,i,a,!1,null,null,null)),U=E.exports,B=(n("d3b7"),n("3ca3"),n("ddb0"),n("8c4f")),D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"})},N=[],H={name:"Home",components:{}},R=H,F=Object(d["a"])(R,D,N,!1,null,null,null),q=(F.exports,function(){return n.e("chunk-625e6cd4").then(n.bind(null,"b160"))}),V=function(){return n.e("chunk-76a5d345").then(n.bind(null,"7316"))},J=function(){return n.e("chunk-8debb1d4").then(n.bind(null,"8228"))};r["default"].use(B["a"]);var z=[{path:"/",name:"Home",redirect:"/discover"},{path:"/discover",name:"Discover",component:q},{path:"/playing",name:"Playing",component:V},{path:"/lyric",name:"Lyric",component:J}],K=new B["a"]({base:"",routes:z}),G=K,Q=n("5c96"),W=n.n(Q),X=(n("1bab"),n("8137")),Y={audio:null,top100List:[],currentIndex:null,currentMusicItem:null,currentList:[],isPlay:!1,duration:null,volume:null,currentTime:null,lyricTextArr:[]},Z=Y,tt=(n("99af"),{albumRotateRunning:function(t){t.albumImgStyle={animation:"albumRotate 20s linear infinite running"}},albumRotatePaused:function(t){t.albumImgStyle={animation:"albumRotate 20s linear infinite paused"}},handleTop100List:function(t,e){t.top100List=e},changeCurrentIndex:function(t,e){switch(e.page){case"DiscoverPage":t.currentList=t.top100List,t.currentIndex=e.currentIndex;break}},handleMusicData:function(t,e){var n=e.musicItem;t.currentMusicItem=n,t.isPlay=!0},sendAudio:function(t,e){t.audio=e},sendAudioVolume:function(t,e){t.volume=e},sendCurrentTime:function(t,e){t.currentTime=e},sendDuration:function(t,e){t.duration=e},changeAudioPlay:function(t,e){t.isPlay=e},handLoadMore:function(t,e){t.top100List=t.top100List.concat(e)},handMusiclyric:function(t,e){t.lyricTextArr=e}}),et=tt,nt=(n("d81d"),n("ac1f"),n("1276"),n("159b"),n("b680"),{getNewMusic:function(t,e){var n=t.commit,r=e.limit,i=void 0===r?20:r;Object(X["d"])(i).then((function(t){var e=t.data.result.map((function(t){return new X["a"](t)}));n("handleTop100List",e)})).catch((function(t){Q["Message"].error({message:"数据请求失败！",showClose:!0}),console.log(t)}))},getMusicDetail:function(t,e){var n=t.commit,r=e.musicItem,i=e.index;Object(X["b"])(r.id).then((function(t){r.musicUrl=t.data.data[0].url;var e={musicItem:r,index:i};n("handleMusicData",e)})).catch((function(t){Q["Message"].error({message:"数据请求失败！",showClose:!0}),console.log(t),r.musicUrl=null;var e={musicItem:r,index:i};n("handleMusicData",e)}))},loadMore:function(t,e){var n=t.commit,r=e.limit;Object(X["d"])(r).then((function(t){var e=t.data.result.map((function(t){return new X["a"](t)}));n("handLoadMore",e)})).catch((function(t){Q["Message"].error({message:"数据请求失败！",showClose:!0}),console.log(t)}))},getMusiclyric:function(t,e){var n=t.commit,r=e.id;Object(X["c"])(r).then((function(t){var e=t.data.lrc.lyric,r=e.split("\n"),i=[];r.forEach((function(t){var e=t.substring(t.indexOf("[")+1,t.indexOf("]")),n={time:(60*e.split(":")[0]+parseFloat(e.split(":")[1])).toFixed(2),text:t.substring(t.indexOf("]")+1,t.length)};i.push(n)})),n("handMusiclyric",i)})).catch((function(t){Q["Message"].error({message:"歌词数据请求失败！",showClose:!0}),console.log(t)}))}}),rt=nt;r["default"].use(k["a"]);var it=new k["a"].Store({state:Z,getters:{currentMusicInfo:function(t){return null!=t.currentList[t.currentIndex]?t.currentList[t.currentIndex]:{}}},mutations:et,actions:rt,modules:{}});n("0fae");r["default"].use(W.a);n("f5df1");console.log("production"),r["default"].config.productionTip=!1,new r["default"]({router:G,store:it,render:function(t){return t(U)}}).$mount("#app")},"585c":function(t,e,n){"use strict";n("67f5")},"67f5":function(t,e,n){},8137:function(t,e,n){"use strict";n.d(e,"d",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"b",(function(){return o})),n.d(e,"c",(function(){return c}));var r=n("d4ec"),i=(n("b0c0"),n("1bab"));function a(t){return Object(i["a"])({url:"/personalized/newsong",params:{limit:t}})}var s=function t(e){Object(r["a"])(this,t),this.name=e.name,this.id=e.id,this.picUrl=e.picUrl,this.songer=e.song.artists[0].name,this.musicUrl=null};function o(t){return Object(i["a"])({url:"/song/url",params:{id:t}})}function c(t){return Object(i["a"])({url:"/lyric",params:{id:t}})}},"85ec":function(t,e,n){},9217:function(t,e,n){t.exports=n.p+"img/播放.cb6b9324.svg"},9892:function(t,e,n){t.exports=n.p+"img/发现.b8b1f01b.svg"},"9a0b":function(t,e,n){},a5d8:function(t,e,n){"use strict";n("edda")},abf7:function(t,e,n){t.exports=n.p+"img/喜欢.0f03ca37.svg"},e162:function(t,e,n){t.exports=n.p+"img/返回.6b5618bb.svg"},eaf0:function(t,e,n){t.exports=n.p+"img/搜索.4c15c1e2.svg"},edda:function(t,e,n){},f15b:function(t,e,n){"use strict";n("261c")}});
//# sourceMappingURL=app.43f23412.js.map