{"version":3,"sources":["webpack:///./src/assets/img/DiscoverPage/火箭.svg","webpack:///./src/views/DiscoverPage.vue?ef2f","webpack:///src/views/DiscoverPage.vue","webpack:///./src/views/DiscoverPage.vue?e1bf","webpack:///./src/views/DiscoverPage.vue","webpack:///./src/assets/img/DiscoverPage/mark.svg","webpack:///./src/assets/img/DiscoverPage/marked.svg","webpack:///./src/views/DiscoverPage.vue?aa2e"],"names":["module","exports","render","_vm","this","_h","$createElement","_c","_self","staticClass","staticStyle","attrs","_v","directives","name","rawName","value","expression","ref","_l","item","index","key","style","currentIndex","playingSongStyle","markImgUrl","picUrl","on","$event","playThisSong","slot","_s","songer","staticRenderFns","data","markedImgUrl","items","limit","isShowBackTop","scrollerPosition","transform","loading","computed","mounted","$refs","top100ItemBoxDom","addEventListener","$store","dispatch","methods","load","$message","backTop","clearInterval","timeTop","page","isPlay","audio","play","commit","playload","musicItem","id","deactivated","activated","scrollTop","component"],"mappings":"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","file":"js/chunk-625e6cd4.a13131a8.js","sourcesContent":["module.exports = __webpack_public_path__ + \"img/火箭.34a1c8dd.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"top-100-page\"},[_c('el-backtop',{staticStyle:{\"background-color\":\"rgba(255, 255, 255, 0)\"},attrs:{\"target\":\".top-100-item-box\",\"bottom\":100}},[_c('img',{attrs:{\"src\":require(\"../assets/img/DiscoverPage/火箭.svg\"),\"width\":\"35px\",\"alt\":\"\"}})]),_c('div',{staticClass:\"top-100-title\"},[_vm._v(\"Top 100\")]),_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.load),expression:\"load\"}],ref:\"top100ItemBoxDom\",staticClass:\"top-100-item-box\",attrs:{\"infinite-scroll-immediate\":\"false\"}},_vm._l((_vm.top100List),function(item,index){return _c('div',{key:index,staticClass:\"top-100-item\",style:(_vm.currentIndex == index ? _vm.playingSongStyle : '')},[_c('img',{staticClass:\"top-100-mark-img\",attrs:{\"src\":_vm.markImgUrl,\"alt\":\"\"}}),_c('el-image',{key:index,staticClass:\"top-100-album-img\",attrs:{\"src\":item.picUrl,\"lazy\":\"\"},on:{\"click\":function($event){return _vm.playThisSong(item, index)}}},[_c('div',{staticClass:\"image-slot\",attrs:{\"slot\":\"placeholder\"},slot:\"placeholder\"},[_vm._v(\" 加载中\"),_c('span',{staticClass:\"dot\"},[_vm._v(\"...\")])])]),_c('div',{staticClass:\"top-100-album-info\"},[_c('div',{staticClass:\"top-100-song-name\"},[_vm._v(_vm._s(item.name))]),_c('div',{staticClass:\"top-100-singer-name\"},[_vm._v(_vm._s(item.songer))])])],1)}),0)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"top-100-page\">\n    <el-backtop\n      target=\".top-100-item-box\"\n      :bottom=\"100\"\n      style=\"background-color: rgba(255, 255, 255, 0)\"\n    >\n      <img src=\"../assets/img/DiscoverPage/火箭.svg\" width=\"35px\" alt=\"\" />\n    </el-backtop>\n\n    <!-- <div class=\"top-100-backtop\" @click=\"backTop\" v-show=\"isShowBackTop\">\n      <img src=\"../assets/img/DiscoverPage/backtop.svg\" width=\"40px\" />\n    </div> -->\n    <div class=\"top-100-title\">Top 100</div>\n    <div\n      class=\"top-100-item-box\"\n      ref=\"top100ItemBoxDom\"\n      v-infinite-scroll=\"load\"\n      infinite-scroll-immediate=\"false\"\n    >\n      <div\n        class=\"top-100-item\"\n        v-for=\"(item, index) in top100List\"\n        :key=\"index\"\n        :style=\"currentIndex == index ? playingSongStyle : ''\"\n      >\n        <img :src=\"markImgUrl\" alt=\"\" class=\"top-100-mark-img\" />\n        <!-- <img :src=\"markedImgUrl\" alt=\"\" class=\"top-100-mark-img\" /> -->\n\n        <el-image\n          :src=\"item.picUrl\"\n          lazy\n          class=\"top-100-album-img\"\n          :key=\"index\"\n          @click=\"playThisSong(item, index)\"\n        >\n          <div slot=\"placeholder\" class=\"image-slot\">\n            加载中<span class=\"dot\">...</span>\n          </div>\n        </el-image>\n\n        <!-- <img :src=\"item.picUrl\" class=\"top-100-album-img\" width=\"100px\" /> -->\n\n        <div class=\"top-100-album-info\">\n          <div class=\"top-100-song-name\">{{ item.name }}</div>\n          <div class=\"top-100-singer-name\">{{ item.songer }}</div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { getRecommendMusic, getNewMusic } from \"@/network/api\";\nimport { Music } from \"@/network/api\";\nimport { mapState } from \"vuex\";\n\nexport default {\n  data() {\n    return {\n      markImgUrl: require(\"@/assets/img/DiscoverPage/mark.svg\"),\n      markedImgUrl: require(\"@/assets/img/DiscoverPage/marked.svg\"),\n      items: [],\n      // items: this.top100List,\n      limit: 36,\n      isShowBackTop: false,\n      scrollerPosition: 0,\n      playingSongStyle: {\n        transform: \"scale(1.1)\",\n      },\n      loading: false,\n    };\n  },\n  computed: {\n    ...mapState({\n      top100List: (state) => state.top100List,\n      currentIndex: (state) => state.currentIndex,\n      audio: \"audio\",\n      isPlay: \"isPlay\",\n    }),\n  },\n  mounted() {\n    //当滑块滑动到一定距离再出现\n    this.$refs.top100ItemBoxDom.addEventListener(\"scroll\", () => {\n      // console.log(this.$refs.top100ItemBoxDom.scrollTop);\n      this.scrollerPosition = this.$refs.top100ItemBoxDom.scrollTop;\n\n      if (this.$refs.top100ItemBoxDom.scrollTop > 600) {\n        this.isShowBackTop = true;\n      } else {\n        this.isShowBackTop = false;\n      }\n    });\n\n    //更改称全局请求数据保存到\n    // this.$store.commit(\"handleTop100List\", 100);\n    this.$store.dispatch(\"getNewMusic\", {\n      limit: this.limit,\n    });\n\n    //获取歌曲数据\n    // getNewMusic(this.limit).then((res) => {\n    //   console.log(res);\n    //   this.items = res.data.result.map((item) => {\n    //     return new Music(item);\n    //   });\n    //   //   console.log(this.items);\n    // });\n  },\n  methods: {\n    load() {\n      // alert(\"++\");\n      // this.$store.dispatch(\"loadMore\", {\n      //   limit: 10,\n      // });\n      this.$message(\"加载更多中\");\n    },\n    backTop() {\n      // 原作者直接让其=0，没有动画效果\n      // console.log(this.$refs.top100ItemBoxDom.scrollTop);\n      //   this.$refs.top100ItemBoxDom.scrollTop = 0;\n\n      // 解决方式来自：https://blog.csdn.net/weixin_41698051/article/details/102836378\n      // 实现滚动效果\n      // 时间可以填16，或者不填，让其立即执行\n      const timeTop = setInterval(() => {\n        this.$refs.top100ItemBoxDom.scrollTop -= 30;\n        if (this.$refs.top100ItemBoxDom.scrollTop <= 0) {\n          clearInterval(timeTop);\n        }\n      });\n    },\n    playThisSong(item, index) {\n      let playload = {\n        page: \"DiscoverPage\",\n        currentIndex: index,\n      };\n\n      if (index == this.currentIndex) {\n        if (!this.isPlay) {\n          this.audio.play();\n          this.$store.commit(\"changeAudioPlay\", true);\n        }\n      } else {\n        this.$store.commit(\"changeCurrentIndex\", playload);\n        this.$store.dispatch(\"getMusicDetail\", {\n          musicItem: item,\n          index: index,\n        });\n        this.$store.dispatch(\"getMusiclyric\", {\n          id: item.id,\n        });\n      }\n    },\n  },\n  //     beforeRouteLeave(to, from, next) {\n  //     //记下离开时滑块位置\n  //     this.scrollerPosition = this.$refs.top100ItemBoxDom.scrollTop\n  //     next()\n  //   },\n  deactivated() {\n    //   原作者结合路由来完成记录离开的postion\n    //   一个bug，离开的时候scrollTop永远等于0\n    // 现在改成放到监听器中赋值\n    // this.scrollerPosition = this.$refs.top100ItemBoxDom.scrollTop;\n    // console.log(\"我走了\" + this.scrollerPosition);\n  },\n  activated() {\n    this.$refs.top100ItemBoxDom.scrollTop = this.scrollerPosition;\n    // console.log(\"我来了\" + this.scrollerPosition);\n  },\n};\n</script>\n\n<style>\n.top-100-page {\n  width: 100%;\n  height: 100%;\n}\n\n.top-100-title {\n  width: 100%;\n  height: 6%;\n  line-height: 40px;\n  text-align: center;\n  font-size: 25px;\n  font-weight: bolder;\n  /* 自己随便加点 */\n  border-radius: 10px;\n  box-shadow: 2px 2px 8px 2px rgb(202, 200, 200);\n}\n.top-100-item-box {\n  width: 100%;\n  height: 94%;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-evenly;\n  transition: all 2s ease-in-out 2s;\n}\n.top-100-backtop {\n  width: 40px;\n  height: 40px;\n  position: fixed;\n  bottom: 15%;\n  right: 3%;\n  border-radius: 10px;\n  background-color: rgba(241, 22, 22, 0.2);\n  z-index: 3;\n}\n.top-100-backtop:active {\n  transform: scale(1.2);\n}\n\n.top-100-item {\n  width: 30%;\n  display: flex;\n  flex-flow: column;\n  justify-content: center;\n  align-items: center;\n  margin-top: 20px;\n  position: relative;\n  transition: transform 0.1s ease-in-out 0.1s;\n}\n/* .top-100-item:active {\n  transform: scale(1.2);\n} */\n.top-100-album-img {\n  border-radius: 20px;\n  box-shadow: 2px 2px 10px 3px grey;\n  width: 100px;\n  height: 100px;\n}\n/* .top-100-album-img :active {\n  transform: scale(1.5);\n} */\n.top-100-mark-img {\n  width: 20px;\n  height: 20px;\n  position: absolute;\n  bottom: 30%;\n  left: 12%;\n  border-radius: 5px;\n  background-color: rgba(255, 255, 255, 0.1);\n  z-index: 2;\n}\n.top-100-mark-img:active {\n  transform: scale(1.5);\n}\n.top-100-album-info {\n  width: 100%;\n}\n.top-100-song-name {\n  width: 100%;\n  margin-top: 5px;\n  font-size: 10px;\n  font-weight: bold;\n  text-align: center;\n  display: block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.top-100-singer-name {\n  width: 100%;\n  margin-top: 5px;\n  font-size: 8px;\n  text-align: center;\n  display: block;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.image-slot {\n  text-align: center;\n  line-height: 100px;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoverPage.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoverPage.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DiscoverPage.vue?vue&type=template&id=381cc932&\"\nimport script from \"./DiscoverPage.vue?vue&type=script&lang=js&\"\nexport * from \"./DiscoverPage.vue?vue&type=script&lang=js&\"\nimport style0 from \"./DiscoverPage.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/mark.0f03ca37.svg\";","module.exports = __webpack_public_path__ + \"img/marked.e0fdd7d1.svg\";","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DiscoverPage.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}